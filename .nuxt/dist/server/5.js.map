{"version":3,"file":"5.js","sources":["webpack:///./api/article.js","webpack:///./pages/editor/index.vue?be93","webpack:///index.vue","webpack:///./pages/editor/index.vue?9495","webpack:///./pages/editor/index.vue"],"sourcesContent":["import { request } from '@/plugins/request'\r\n\r\nclass Article {\r\n  /**\r\n   * @description 获取公共文章列表\r\n   * @param { object } params \r\n   * @returns \r\n   */\r\n  getArticles(params) {\r\n    return request.get('/api/articles', { params })\r\n  }\r\n\r\n  /**\r\n   * @description 获取关注的文章列表 \r\n   * @param { object } params \r\n   * @returns \r\n   */\r\n  // 获取公共文章列表\r\n  getFeedArticles(params) {\r\n    return request.get('/api/articles/feed', { params })\r\n  }\r\n\r\n  /**\r\n   * @description 添加点赞功能\r\n   * @param {string} params \r\n   * @returns \r\n   */\r\n  addFavorite(slug) {\r\n    return request.post(`/api/articles/${slug}/favorite`)\r\n  }\r\n\r\n  /**\r\n   * @description 取消点赞功能\r\n   * @param {string} params \r\n   * @returns \r\n   */\r\n  deleteFavorite(slug) {\r\n    return request.delete(`/api/articles/${slug}/favorite`)\r\n  }\r\n\r\n  /**\r\n   * @description 获取文章详情\r\n   * @param {string} slug \r\n   * @returns \r\n   */\r\n  getArticle(slug) {\r\n    return request.get(`/api/articles/${slug}`)\r\n  }\r\n\r\n  /**\r\n   * @description 获取文章品论\r\n   * @param {string} slug \r\n   * @returns \r\n   */\r\n  getComments(slug) {\r\n    return request.get(`/api/articles/${slug}/comments`)\r\n  }\r\n\r\n  /**\r\n   * @description 添加文章\r\n   * @param {object} params \r\n   * @returns \r\n   */\r\n  addArticle(params) {\r\n    return request.post('/api/articles', params)\r\n  }\r\n\r\n  /**\r\n   * @description 修改文章\r\n   * @param {object} params \r\n   * @returns \r\n   */\r\n  updateArticle(id, params) {\r\n    return request.put(`/api/articles/${id}`, params)\r\n  }\r\n\r\n  /**\r\n   * @description 删除一篇文章\r\n   * @param {string} id \r\n   * @returns \r\n   */\r\n  deleteArticle(id) {\r\n    return request.delete(`/api/articles/${id}`)\r\n  }\r\n}\r\n\r\nexport default new Article()\r\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',{staticClass:\"editor-container\"},[_vm._ssrNode(\"<div class=\\\"editor-page\\\"><div class=\\\"container page\\\"><div class=\\\"row\\\"><div class=\\\"col-md-10 offset-md-1 col-xs-12\\\"><form><fieldset><fieldset class=\\\"form-group\\\"><input type=\\\"text\\\" placeholder=\\\"文章标题\\\"\"+(_vm._ssrAttr(\"value\",(_vm.params.title)))+\" class=\\\"form-control form-control-lg\\\"></fieldset> <fieldset class=\\\"form-group\\\"><input type=\\\"text\\\" placeholder=\\\"文章描述\\\"\"+(_vm._ssrAttr(\"value\",(_vm.params.description)))+\" class=\\\"form-control\\\"></fieldset> <fieldset class=\\\"form-group\\\"><textarea rows=\\\"8\\\" placeholder=\\\"文章内容 - markdown 格式\\\" class=\\\"form-control\\\">\"+_vm._ssrEscape(_vm._s(_vm.params.body))+\"</textarea></fieldset> <fieldset class=\\\"form-group\\\"><input type=\\\"text\\\" placeholder=\\\"文章标签 - 多个以逗号分隔 (英文逗号)\\\"\"+(_vm._ssrAttr(\"value\",(_vm.tagList)))+\" class=\\\"form-control\\\"> <div class=\\\"tag-list\\\"></div></fieldset> <button\"+(_vm._ssrAttr(\"disabled\",_vm.isLoading))+\" type=\\\"button\\\" class=\\\"btn btn-lg pull-xs-right btn-primary\\\">\"+_vm._ssrEscape(_vm._s(_vm.id ? '重新发布' : '发布一篇'))+\"</button></fieldset></form></div></div></div></div>\")])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <section class=\"editor-container\">\r\n    <div class=\"editor-page\">\r\n      <div class=\"container page\">\r\n        <div class=\"row\">\r\n          <div class=\"col-md-10 offset-md-1 col-xs-12\">\r\n            <form>\r\n              <fieldset>\r\n                <fieldset class=\"form-group\">\r\n                  <input v-model=\"params.title\" type=\"text\" class=\"form-control form-control-lg\" placeholder=\"文章标题\" />\r\n                </fieldset>\r\n                <fieldset class=\"form-group\">\r\n                  <input v-model=\"params.description\" type=\"text\" class=\"form-control\" placeholder=\"文章描述\" />\r\n                </fieldset>\r\n                <fieldset class=\"form-group\">\r\n                  <textarea v-model=\"params.body\" class=\"form-control\" rows=\"8\" placeholder=\"文章内容 - markdown 格式\"></textarea>\r\n                </fieldset>\r\n                <fieldset class=\"form-group\">\r\n                  <input v-model=\"tagList\" type=\"text\" class=\"form-control\" placeholder=\"文章标签 - 多个以逗号分隔 (英文逗号)\" />\r\n                  <div class=\"tag-list\"></div>\r\n                </fieldset>\r\n                <button @click=\"publish\" :disabled=\"isLoading\" class=\"btn btn-lg pull-xs-right btn-primary\" type=\"button\">{{ id ? '重新发布' : '发布一篇' }}</button>\r\n              </fieldset>\r\n            </form>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </section>\r\n</template>\r\n\r\n<script>\r\nimport articleApi from '@/api/article'\r\n\r\nexport default {\r\n  // 在路由匹配组件渲染之前会先执行中间件处理\r\n  middleware: 'authenticated',\r\n  name: 'editor',\r\n  data() {\r\n    return {\r\n      id: null,\r\n      isLoading: false,\r\n      params: {\r\n        title: '',\r\n        description: '',\r\n        body: '',\r\n      },\r\n      tagList: ''\r\n    }\r\n  },\r\n  mounted() {\r\n    this.id = this.$route.query.id\r\n    if (this.id) this.getArticleDetail()\r\n  },\r\n  methods: {\r\n    async publish() {\r\n      this.tagList.replace(/，/g, ',')\r\n      this.params.tagList = this.tagList.split(',')\r\n      if (this.id) {\r\n        const ret = await articleApi.updateArticle(this.id, { article: this.params })\r\n        if (ret.data) this.$router.go(-1)\r\n      } else {\r\n        const ret = await articleApi.addArticle({ article: this.params })\r\n        if (ret.data) this.$router.push('/')\r\n      }\r\n    },\r\n    async getArticleDetail() {\r\n      const ret = await articleApi.getArticle(this.id)\r\n      const { title, description, body, tagList } = ret.data.article\r\n\r\n      this.params.title = title\r\n      this.params.description = description\r\n      this.params.body = body\r\n      this.tagList = tagList.join(',')\r\n    }\r\n  }\r\n}\r\n</script>\r\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js??ref--2-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js??ref--2-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=69f9cc80&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  \"3a88af92\"\n  \n)\n\nexport default component.exports"],"mappings":";;;;;;;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AADA;AACA;AAAA;AAAA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AADA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AADA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AADA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AADA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AADA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AADA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AADA;AACA;AACA;AACA;AAlFA;AACA;AAmFA;;;;;;;;;;;;ACtFA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC8BA;AAEA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAHA;AAKA;AARA;AAUA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AArBA;AApBA;;AClCA;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;A","sourceRoot":""}