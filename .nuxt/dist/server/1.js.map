{"version":3,"file":"1.js","sources":["webpack:///./api/article.js","webpack:///./api/user.js","webpack:///./components/articleList.vue?70fe","webpack:///./pages/profile/index.vue?40b1","webpack:///./components/articleList.vue?e0f3","webpack:///./components/articleList.vue?d7e6","webpack:///./pages/profile/index.vue?e3c9","webpack:///./pages/profile/index.vue?9e26","webpack:///./pages/profile/index.vue?dde9","webpack:///./components/articleList.vue?acb1","webpack:///articleList.vue","webpack:///./components/articleList.vue?68cf","webpack:///./components/articleList.vue","webpack:///index.vue","webpack:///./pages/profile/index.vue?00a0","webpack:///./pages/profile/index.vue"],"sourcesContent":["import { request } from '@/plugins/request'\r\n\r\nclass Article {\r\n  /**\r\n   * @description 获取公共文章列表\r\n   * @param { object } params \r\n   * @returns \r\n   */\r\n  getArticles(params) {\r\n    return request.get('/api/articles', { params })\r\n  }\r\n\r\n  /**\r\n   * @description 获取关注的文章列表 \r\n   * @param { object } params \r\n   * @returns \r\n   */\r\n  // 获取公共文章列表\r\n  getFeedArticles(params) {\r\n    return request.get('/api/articles/feed', { params })\r\n  }\r\n\r\n  /**\r\n   * @description 添加点赞功能\r\n   * @param {string} params \r\n   * @returns \r\n   */\r\n  addFavorite(slug) {\r\n    return request.post(`/api/articles/${slug}/favorite`)\r\n  }\r\n\r\n  /**\r\n   * @description 取消点赞功能\r\n   * @param {string} params \r\n   * @returns \r\n   */\r\n  deleteFavorite(slug) {\r\n    return request.delete(`/api/articles/${slug}/favorite`)\r\n  }\r\n\r\n  /**\r\n   * @description 获取文章详情\r\n   * @param {string} slug \r\n   * @returns \r\n   */\r\n  getArticle(slug) {\r\n    return request.get(`/api/articles/${slug}`)\r\n  }\r\n\r\n  /**\r\n   * @description 获取文章品论\r\n   * @param {string} slug \r\n   * @returns \r\n   */\r\n  getComments(slug) {\r\n    return request.get(`/api/articles/${slug}/comments`)\r\n  }\r\n\r\n  /**\r\n   * @description 添加文章\r\n   * @param {object} params \r\n   * @returns \r\n   */\r\n  addArticle(params) {\r\n    return request.post('/api/articles', params)\r\n  }\r\n\r\n  /**\r\n   * @description 修改文章\r\n   * @param {object} params \r\n   * @returns \r\n   */\r\n  updateArticle(id, params) {\r\n    return request.put(`/api/articles/${id}`, params)\r\n  }\r\n\r\n  /**\r\n   * @description 删除一篇文章\r\n   * @param {string} id \r\n   * @returns \r\n   */\r\n  deleteArticle(id) {\r\n    return request.delete(`/api/articles/${id}`)\r\n  }\r\n}\r\n\r\nexport default new Article()\r\n","import { request } from '@/plugins/request'\r\n\r\nclass User {\r\n  // 用户登录\r\n  login(data) {\r\n    return request.post('/api/users/login', data)\r\n  }\r\n\r\n  // 用户注册\r\n  register(data) {\r\n    return request.post('/api/users', data)\r\n  }\r\n\r\n  // 设置用户信息\r\n  settingUser(data) {\r\n    return request.put('/api/user', data)\r\n  }\r\n\r\n  /**\r\n   * @description 根据用户名获取用户信息\r\n   * @param {string} name \r\n   * @returns \r\n   */\r\n  getProfiles(name) {\r\n    return request.get(`/api/profiles/${name}`)\r\n  }\r\n}\r\n\r\nexport default new User()\r\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../node_modules/css-loader/dist/cjs.js??ref--3-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--3-oneOf-1-2!../node_modules/vue-loader/lib/index.js??vue-loader-options!./articleList.vue?vue&type=style&index=0&id=7cc2c608&scoped=true&lang=css&\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add CSS to SSR context\nvar add = require(\"!../node_modules/vue-style-loader/lib/addStylesServer.js\").default\nmodule.exports.__inject__ = function (context) {\n  add(\"db82633c\", content, true, context)\n};","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/css-loader/dist/cjs.js??ref--5-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--5-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--5-oneOf-1-3!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=f20404f4&lang=less&scoped=true&\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add CSS to SSR context\nvar add = require(\"!../../node_modules/vue-style-loader/lib/addStylesServer.js\").default\nmodule.exports.__inject__ = function (context) {\n  add(\"45b10e48\", content, true, context)\n};","export * from \"-!../node_modules/vue-style-loader/index.js??ref--3-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--3-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--3-oneOf-1-2!../node_modules/vue-loader/lib/index.js??vue-loader-options!./articleList.vue?vue&type=style&index=0&id=7cc2c608&scoped=true&lang=css&\"","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../node_modules/css-loader/dist/runtime/api.js\");\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(false);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"ul[data-v-7cc2c608]{padding:0}li[data-v-7cc2c608]{list-style:none}\", \"\"]);\n// Exports\nmodule.exports = ___CSS_LOADER_EXPORT___;\n","export * from \"-!../../node_modules/vue-style-loader/index.js??ref--5-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--5-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--5-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--5-oneOf-1-3!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=f20404f4&lang=less&scoped=true&\"","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../node_modules/css-loader/dist/runtime/api.js\");\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(false);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".user-container .nav-link[data-v-f20404f4]{cursor:pointer!important}\", \"\"]);\n// Exports\nmodule.exports = ___CSS_LOADER_EXPORT___;\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',{staticClass:\"user-container\"},[_vm._ssrNode(\"<div class=\\\"profile-page\\\" data-v-f20404f4>\",\"</div>\",[_vm._ssrNode(\"<div class=\\\"user-info\\\" data-v-f20404f4>\",\"</div>\",[_vm._ssrNode(\"<div class=\\\"container\\\" data-v-f20404f4>\",\"</div>\",[_vm._ssrNode(\"<div class=\\\"row\\\" data-v-f20404f4>\",\"</div>\",[_vm._ssrNode(\"<div class=\\\"col-xs-12 col-md-10 offset-md-1\\\" data-v-f20404f4>\",\"</div>\",[_vm._ssrNode(\"<img\"+(_vm._ssrAttr(\"src\",_vm.user.image))+\" class=\\\"user-img\\\" data-v-f20404f4> <h4 data-v-f20404f4>\"+_vm._ssrEscape(_vm._s(_vm.user.username))+\"</h4> <p data-v-f20404f4>\"+_vm._ssrEscape(_vm._s(_vm.user.bio))+\"</p> \"),_c('nuxt-link',{staticClass:\"btn btn-sm btn-outline-secondary action-btn\",attrs:{\"to\":\"/settings\"}},[_c('i',{staticClass:\"ion-plus-round\"}),_vm._v(\"\\n                Edit Profile Settings\\n            \")])],2)])])]),_vm._ssrNode(\" \"),_vm._ssrNode(\"<div class=\\\"container\\\" data-v-f20404f4>\",\"</div>\",[_vm._ssrNode(\"<div class=\\\"row\\\" data-v-f20404f4>\",\"</div>\",[_vm._ssrNode(\"<div class=\\\"col-xs-12 col-md-10 offset-md-1\\\" data-v-f20404f4>\",\"</div>\",[_vm._ssrNode(\"<div class=\\\"articles-toggle\\\" data-v-f20404f4>\",\"</div>\",[_vm._ssrNode(\"<ul class=\\\"nav nav-pills outline-active\\\" data-v-f20404f4>\",\"</ul>\",[_vm._ssrNode(\"<li class=\\\"nav-item\\\" data-v-f20404f4>\",\"</li>\",[_c('nuxt-link',{staticClass:\"nav-link\",class:{ active: _vm.tab === 'my' },attrs:{\"to\":{ name: 'profile', params: { username: _vm.user.username }, query: { tab: 'my' } },\"exact\":\"\"}},[_vm._v(\"我发布的文章\")])],1),_vm._ssrNode(\" \"),_vm._ssrNode(\"<li class=\\\"nav-item\\\" data-v-f20404f4>\",\"</li>\",[_c('nuxt-link',{staticClass:\"nav-link\",class:{ active: _vm.tab === 'fav' },attrs:{\"to\":{ name: 'profile', params: { username: _vm.user.username }, query: { tab: 'fav' } },\"exact\":\"\"}},[_vm._v(\"我点赞的文章\")])],1)],2)]),_vm._ssrNode(\" \"),_c('article-list',{attrs:{\"articles\":_vm.articles}})],2)])])],2)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('ul',_vm._l((_vm.articles),function(article){return _vm._ssrNode(\"<li class=\\\"article-preview\\\" data-v-7cc2c608>\",\"</li>\",[_vm._ssrNode(\"<div class=\\\"article-meta\\\" data-v-7cc2c608>\",\"</div>\",[_c('nuxt-link',{attrs:{\"to\":{ name: 'profile', params: { username: article.author.username } }}},[_c('img',{attrs:{\"src\":article.author.image}})]),_vm._ssrNode(\" \"),_vm._ssrNode(\"<div class=\\\"info\\\" data-v-7cc2c608>\",\"</div>\",[_c('nuxt-link',{attrs:{\"to\":{ name: 'profile', params: { username: article.author.username } }}},[_vm._v(_vm._s(article.author.username))]),_vm._ssrNode(\" <span class=\\\"date\\\" data-v-7cc2c608>\"+_vm._ssrEscape(_vm._s(_vm._f(\"date\")(article.createdAt)))+\"</span>\")],2),_vm._ssrNode(\" <button\"+(_vm._ssrAttr(\"disabled\",article.favoriteDisabled))+(_vm._ssrClass(\"btn btn-outline-primary btn-sm pull-xs-right\",{ active: article.favorited }))+\" data-v-7cc2c608><i class=\\\"ion-heart\\\" data-v-7cc2c608></i>\"+_vm._ssrEscape(\" \"+_vm._s(article.favoritesCount))+\"</button>\")],2),_vm._ssrNode(\" \"),_c('nuxt-link',{staticClass:\"preview-link\",attrs:{\"to\":{ name: 'article', params: { slug: article.slug } }}},[_c('h1',[_vm._v(_vm._s(article.title))]),_vm._v(\" \"),_c('p',[_vm._v(_vm._s(article.description))]),_vm._v(\" \"),_c('span',[_vm._v(\"Read more...\")])])],2)}),0)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<style scoped>\r\nul {\r\n  padding: 0;\r\n}\r\nli {\r\n  list-style: none;\r\n}\r\n</style>\r\n<template>\r\n  <ul>\r\n    <li v-for=\"article in articles\" :key=\"article.slug\" class=\"article-preview\">\r\n      <div class=\"article-meta\">\r\n        <nuxt-link :to=\"{ name: 'profile', params: { username: article.author.username } }\">\r\n          <img :src=\"article.author.image\" />\r\n        </nuxt-link>\r\n        <div class=\"info\">\r\n          <nuxt-link :to=\"{ name: 'profile', params: { username: article.author.username } }\">{{ article.author.username }}</nuxt-link>\r\n          <span class=\"date\">{{ article.createdAt | date }}</span>\r\n        </div>\r\n        <button @click=\"onFavorite(article)\" :disabled=\"article.favoriteDisabled\" :class=\"{ active: article.favorited }\" class=\"btn btn-outline-primary btn-sm pull-xs-right\"><i class=\"ion-heart\"></i> {{ article.favoritesCount }}</button>\r\n      </div>\r\n      <nuxt-link :to=\"{ name: 'article', params: { slug: article.slug } }\" class=\"preview-link\">\r\n        <h1>{{ article.title }}</h1>\r\n        <p>{{ article.description }}</p>\r\n        <span>Read more...</span>\r\n      </nuxt-link>\r\n    </li>\r\n  </ul>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'articleList',\r\n  props: {\r\n    articles: {\r\n      type: Array,\r\n      required: true\r\n    }\r\n  }\r\n}\r\n</script>\r\n","import mod from \"-!../node_modules/babel-loader/lib/index.js??ref--2-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./articleList.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/babel-loader/lib/index.js??ref--2-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./articleList.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./articleList.vue?vue&type=template&id=7cc2c608&scoped=true&\"\nimport script from \"./articleList.vue?vue&type=script&lang=js&\"\nexport * from \"./articleList.vue?vue&type=script&lang=js&\"\nfunction injectStyles (context) {\n  \n  var style0 = require(\"./articleList.vue?vue&type=style&index=0&id=7cc2c608&scoped=true&lang=css&\")\nif (style0.__inject__) style0.__inject__(context)\n\n}\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  injectStyles,\n  \"7cc2c608\",\n  \"471f6e2c\"\n  \n)\n\nexport default component.exports","<style lang=\"less\" scoped>\r\n.user-container {\r\n  .nav-link {\r\n    cursor: pointer !important;\r\n  }\r\n}\r\n</style>\r\n<template>\r\n  <section class=\"user-container\">\r\n    <div class=\"profile-page\">\r\n      <div class=\"user-info\">\r\n        <div class=\"container\">\r\n          <div class=\"row\">\r\n            <div class=\"col-xs-12 col-md-10 offset-md-1\">\r\n              <img :src=\"user.image\" class=\"user-img\" />\r\n              <h4>{{ user.username }}</h4>\r\n              <p>{{ user.bio }}</p>\r\n              <nuxt-link to=\"/settings\" class=\"btn btn-sm btn-outline-secondary action-btn\">\r\n                <i class=\"ion-plus-round\"></i>\r\n                &nbsp; Edit Profile Settings\r\n              </nuxt-link>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"container\">\r\n        <div class=\"row\">\r\n          <div class=\"col-xs-12 col-md-10 offset-md-1\">\r\n            <div class=\"articles-toggle\">\r\n              <ul class=\"nav nav-pills outline-active\">\r\n                <li class=\"nav-item\">\r\n                  <nuxt-link :to=\"{ name: 'profile', params: { username: user.username }, query: { tab: 'my' } }\" :class=\"{ active: tab === 'my' }\" exact class=\"nav-link\">我发布的文章</nuxt-link>\r\n                </li>\r\n                <li class=\"nav-item\">\r\n                  <nuxt-link :to=\"{ name: 'profile', params: { username: user.username }, query: { tab: 'fav' } }\" :class=\"{ active: tab === 'fav' }\" exact class=\"nav-link\">我点赞的文章</nuxt-link>\r\n                </li>\r\n              </ul>\r\n            </div>\r\n\r\n            <article-list :articles=\"articles\" />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </section>\r\n</template>\r\n\r\n<script>\r\nimport articleApi from '@/api/article'\r\nimport articleList from '../../components/articleList'\r\nimport userApi from '@/api/user'\r\n\r\nexport default {\r\n  components: { articleList },\r\n  middleware: 'authenticated',\r\n  name: 'profile',\r\n  data() {\r\n    return {\r\n\r\n    }\r\n  },\r\n  // 解决点击页码 重新加载 asyncData 问题\r\n  // url 地址栏有相应参数，重新触发 asyncData\r\n  watchQuery: ['tab'],\r\n  async asyncData({ params, query, store }) {\r\n    // 获取文章列表\r\n    const page = Number.parseInt(params.page || 1)\r\n    const limit = 20\r\n    const author = params.username\r\n    const tab = query.tab\r\n    let user = null;\r\n\r\n    const userRet = await userApi.getProfiles(author)\r\n    if (userRet) user = userRet.data.profile\r\n\r\n    const ret = await articleApi.getArticles({\r\n      limit,\r\n      favorited: query.tab === 'fav' ? author : void 0,\r\n      author: query.tab === 'fav' ? void 0 : author,\r\n      offset: (page - 1) * limit\r\n    })\r\n\r\n    const { articles, articlesCount } = ret.data\r\n    // articles.forEach(e => e.favoriteDisabled = false)\r\n    return {\r\n      articles,\r\n      articlesCount,\r\n      limit,\r\n      page,\r\n      tab: tab || 'my',\r\n      user\r\n    }\r\n  }\r\n}\r\n</script>\r\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js??ref--2-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js??ref--2-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=f20404f4&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nfunction injectStyles (context) {\n  \n  var style0 = require(\"./index.vue?vue&type=style&index=0&id=f20404f4&lang=less&scoped=true&\")\nif (style0.__inject__) style0.__inject__(context)\n\n}\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  injectStyles,\n  \"f20404f4\",\n  \"2ba73c0a\"\n  \n)\n\nexport default component.exports"],"mappings":";;;;;;;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AADA;AACA;AAAA;AAAA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AADA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AADA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AADA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AADA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AADA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AADA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AADA;AACA;AACA;AACA;AAlFA;AACA;AAmFA;;;;;;;;ACtFA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AADA;AACA;AACA;AACA;AAxBA;AACA;AAyBA;;;;;;;AC5BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACXA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;ACXA;AAAA;AAAA;AAAA;;;;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;ACNA;AAAA;AAAA;AAAA;;;;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACNA;AACA;AACA;;;;;;;;ACFA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC6BA;AACA;AACA;AACA;AACA;AACA;AAFA;AADA;AAFA;;AC/BA;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC0BA;AACA;AACA;AAEA;AACA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AACA;AAGA;AACA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AAJA;AAOA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AANA;AAQA;AACA;AAzCA;;ACrDA;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;A","sourceRoot":""}